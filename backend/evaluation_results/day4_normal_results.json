{
  "summary": {
    "total_test_cases": 20,
    "schema_linking_success": 20,
    "generation_success": 20,
    "validation_success": 16,
    "execution_success": 16,
    "execution_failed": 0,
    "critic_blocked": 4,
    "execution_success_rate": 100.0,
    "avg_execution_latency_ms": 9.7775,
    "total_time_seconds": 26.615758419036865,
    "criteria_met": {
      "execution_success_100%": true,
      "latency_under_5s": true,
      "error_classification_working": true,
      "all_passed": true
    },
    "executor_metrics": {
      "total_queries": 16,
      "successful_queries": 16,
      "failed_queries": 0,
      "avg_execution_time_ms": 9.7775,
      "max_execution_time_ms": 52.66,
      "min_execution_time_ms": 4.24,
      "error_distribution": {}
    }
  },
  "test_results": [
    {
      "id": "simple_001",
      "question": "How many products are in the database?",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "order_items",
          "reviews"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT COUNT(product_id) AS total_products FROM products LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 1,
        "execution_time_ms": 52.66,
        "sql_executed": "SELECT COUNT(product_id) AS total_products FROM products LIMIT 1000"
      }
    },
    {
      "id": "simple_002",
      "question": "List all customer names",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "customers",
          "orders",
          "reviews"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT name FROM customers LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 4.4,
        "sql_executed": "SELECT name FROM customers LIMIT 1000"
      }
    },
    {
      "id": "simple_003",
      "question": "Show products with price greater than 100",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "order_items"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "SELECT product_id, name, stock_quantity, price FROM products WHERE price > 100 LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 1,
        "execution_time_ms": 17.54,
        "sql_executed": "SELECT product_id, name, stock_quantity, price FROM products WHERE price > 100 LIMIT 1000"
      }
    },
    {
      "id": "simple_004",
      "question": "What are the top 5 most expensive products?",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "order_items"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "SELECT product_id, name, price FROM products ORDER BY price DESC LIMIT 5;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 8.89,
        "sql_executed": "SELECT product_id, name, price FROM products ORDER BY price DESC LIMIT 5"
      }
    },
    {
      "id": "simple_005",
      "question": "Count how many orders have completed status",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "orders",
          "payments",
          "order_items"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT COUNT(order_id) AS completed_orders_count FROM orders WHERE status ILIKE 'completed' LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 1,
        "execution_time_ms": 6.74,
        "sql_executed": "SELECT COUNT(order_id) AS completed_orders_count FROM orders WHERE status ILIKE 'completed' LIMIT 1000"
      }
    },
    {
      "id": "simple_006",
      "question": "Show all product categories",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "categories"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "SELECT name, description FROM categories LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 4.52,
        "sql_executed": "SELECT name, description FROM categories LIMIT 1000"
      }
    },
    {
      "id": "simple_007",
      "question": "Find products with low stock (less than 10 units)",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "order_items"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "SELECT product_id, stock_quantity FROM products WHERE stock_quantity < 10 LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 0,
        "execution_time_ms": 4.38,
        "sql_executed": "SELECT product_id, stock_quantity FROM products WHERE stock_quantity < 10 LIMIT 1000"
      }
    },
    {
      "id": "simple_008",
      "question": "List customers from USA",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "customers",
          "orders",
          "reviews"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT name, email, customer_id FROM customers WHERE country ILIKE 'USA' LIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 1,
        "execution_time_ms": 4.3,
        "sql_executed": "SELECT name, email, customer_id FROM customers WHERE country ILIKE 'USA' LIMIT 1000"
      }
    },
    {
      "id": "medium_001",
      "question": "What are the top 10 products by revenue?",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "order_items"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "SELECT oi.product_id, SUM(oi.subtotal) AS total_revenue\nFROM order_items oi\nGROUP BY oi.product_id\nORDER BY total_revenue DESC\nLIMIT 10;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 6.0,
        "sql_executed": "SELECT oi.product_id, SUM(oi.subtotal) AS total_revenue\nFROM order_items oi\nGROUP BY oi.product_id\nORDER BY total_revenue DESC\nLIMIT 10"
      }
    },
    {
      "id": "medium_002",
      "question": "Show customers and their total order count",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "orders",
          "order_items",
          "payments"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT customer_id, COUNT(*) AS total_order_count \nFROM orders \nGROUP BY customer_id \nORDER BY total_order_count DESC \nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 8.33,
        "sql_executed": "SELECT customer_id, COUNT(*) AS total_order_count \nFROM orders \nGROUP BY customer_id \nORDER BY total_order_count DESC \nLIMIT 1000"
      }
    },
    {
      "id": "medium_003",
      "question": "Calculate total revenue by product category",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "orders",
          "order_items"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "-- TODO: Missing table"
      },
      "validation": {
        "is_valid": false,
        "confidence": 0.4,
        "issues": [
          "SQL must start with SELECT or WITH"
        ]
      },
      "execution": {
        "executed": false,
        "reason": "Blocked by Critic"
      }
    },
    {
      "id": "medium_004",
      "question": "Find products that have never been ordered",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "order_items",
          "products",
          "reviews",
          "orders"
        ],
        "table_count": 4
      },
      "generation": {
        "success": true,
        "sql": "SELECT p.product_id \nFROM products p \nLEFT JOIN order_items oi ON p.product_id = oi.product_id \nWHERE oi.product_id IS NULL \nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 0,
        "execution_time_ms": 4.58,
        "sql_executed": "SELECT p.product_id \nFROM products p \nLEFT JOIN order_items oi ON p.product_id = oi.product_id \nWHERE oi.product_id IS NULL \nLIMIT 1000"
      }
    },
    {
      "id": "medium_005",
      "question": "Show average order value by customer",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "orders",
          "order_items",
          "customers"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT customer_id, AVG(total_amount) AS average_order_value\nFROM orders\nGROUP BY customer_id\nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 8.16,
        "sql_executed": "SELECT customer_id, AVG(total_amount) AS average_order_value\nFROM orders\nGROUP BY customer_id\nLIMIT 1000"
      }
    },
    {
      "id": "medium_006",
      "question": "List products with their average review rating",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "reviews"
        ],
        "table_count": 1
      },
      "generation": {
        "success": true,
        "sql": "SELECT product_id, AVG(rating) AS average_rating \nFROM reviews \nGROUP BY product_id \nORDER BY product_id \nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 0,
        "execution_time_ms": 7.03,
        "sql_executed": "SELECT product_id, AVG(rating) AS average_rating \nFROM reviews \nGROUP BY product_id \nORDER BY product_id \nLIMIT 1000"
      }
    },
    {
      "id": "medium_007",
      "question": "Count orders per payment method",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "payments",
          "orders"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "SELECT payment_method, COUNT(order_id) AS order_count \nFROM payments \nGROUP BY payment_method \nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 2,
        "execution_time_ms": 7.61,
        "sql_executed": "SELECT payment_method, COUNT(order_id) AS order_count \nFROM payments \nGROUP BY payment_method \nLIMIT 1000"
      }
    },
    {
      "id": "medium_008",
      "question": "Show total quantity sold for each product",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "order_items",
          "products",
          "orders"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT oi.quantity, SUM(oi.quantity) AS total_quantity_sold\nFROM order_items oi\nGROUP BY oi.quantity\nORDER BY total_quantity_sold DESC\nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 1,
        "execution_time_ms": 7.06,
        "sql_executed": "SELECT oi.quantity, SUM(oi.quantity) AS total_quantity_sold\nFROM order_items oi\nGROUP BY oi.quantity\nORDER BY total_quantity_sold DESC\nLIMIT 1000"
      }
    },
    {
      "id": "hard_001",
      "question": "Find customers who have placed more orders than average",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "orders",
          "order_items",
          "customers",
          "payments"
        ],
        "table_count": 4
      },
      "generation": {
        "success": true,
        "sql": "WITH order_counts AS (\n    SELECT customer_id, COUNT(*) AS order_count\n    FROM orders\n    GROUP BY customer_id\n),\naverage_order_count AS (\n    SELECT AVG(order_count) AS avg_order_count\n    FROM order_counts\n)\nSELECT c.name, oc.order_count\nFROM order_counts oc\nJOIN customers c ON oc.customer_id = c.customer_id\nWHERE oc.order_count > (SELECT avg_order_count FROM average_order_count)\nORDER BY oc.order_count DESC\nLIMIT 1000;"
      },
      "validation": {
        "is_valid": false,
        "confidence": 0.0,
        "issues": [
          "Table 'order_counts' not in schema (available: order_items, customers, orders, payments)",
          "Table 'average_order_count' not in schema (available: order_items, customers, orders, payments)",
          "Column 'customer_id' not in table 'customers' (available: lifetime_value, name...)"
        ]
      },
      "execution": {
        "executed": false,
        "reason": "Blocked by Critic"
      }
    },
    {
      "id": "hard_002",
      "question": "Show monthly revenue trend for the last 6 months",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "customers",
          "orders",
          "payments",
          "order_items"
        ],
        "table_count": 4
      },
      "generation": {
        "success": true,
        "sql": "WITH monthly_revenue AS (\n    SELECT \n        DATE_TRUNC('month', payment_date) AS month,\n        SUM(amount) AS total_revenue\n    FROM payments\n    WHERE payment_date >= CURRENT_DATE - INTERVAL '6 months'\n    GROUP BY month\n)\nSELECT month, total_revenue\nFROM monthly_revenue\nORDER BY month\nLIMIT 1000;"
      },
      "validation": {
        "is_valid": false,
        "confidence": 0.39999999999999997,
        "issues": [
          "Table 'monthly_revenue' not in schema (available: order_items, customers, orders, payments)",
          "Multiple tables detected but no JOIN found (possible cartesian product)"
        ]
      },
      "execution": {
        "executed": false,
        "reason": "Blocked by Critic"
      }
    },
    {
      "id": "hard_003",
      "question": "Rank products by revenue within each category",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "products",
          "order_items",
          "reviews"
        ],
        "table_count": 3
      },
      "generation": {
        "success": true,
        "sql": "SELECT category_id, SUM(price * stock_quantity) AS revenue\nFROM products\nGROUP BY category_id\nORDER BY category_id, revenue DESC\nLIMIT 1000;"
      },
      "validation": {
        "is_valid": true,
        "confidence": 1.0,
        "issues": []
      },
      "execution": {
        "executed": true,
        "success": true,
        "row_count": 3,
        "execution_time_ms": 4.24,
        "sql_executed": "SELECT category_id, SUM(price * stock_quantity) AS revenue\nFROM products\nGROUP BY category_id\nORDER BY category_id, revenue DESC\nLIMIT 1000"
      }
    },
    {
      "id": "hard_004",
      "question": "Identify customers who haven't ordered in the last 90 days",
      "expected_query": "",
      "difficulty": "unknown",
      "category": "unknown",
      "schema_linking": {
        "success": true,
        "tables": [
          "orders",
          "customers"
        ],
        "table_count": 2
      },
      "generation": {
        "success": true,
        "sql": "WITH recent_orders AS (\n    SELECT DISTINCT customer_id\n    FROM orders\n    WHERE created_at >= CURRENT_DATE - INTERVAL '90 days'\n)\nSELECT c.customer_id, c.name, c.lifetime_value\nFROM customers c\nLEFT JOIN recent_orders ro ON c.customer_id = ro.customer_id\nWHERE ro.customer_id IS NULL\nLIMIT 1000;"
      },
      "validation": {
        "is_valid": false,
        "confidence": 0.0,
        "issues": [
          "Table 'recent_orders' not in schema (available: customers, orders)",
          "Unsafe operation detected: CREATE"
        ]
      },
      "execution": {
        "executed": false,
        "reason": "Blocked by Critic"
      }
    }
  ]
}