{
  "metadata": {
    "total_queries": 20,
    "successful_queries": 19,
    "overall_success_rate": 0.95,
    "prompt_version": "v1"
  },
  "results": [
    {
      "id": "simple_001",
      "question": "How many products are in the database?",
      "complexity": "simple",
      "ground_truth_tables": [
        "products"
      ],
      "retrieved_tables": [
        "products",
        "order_items",
        "reviews"
      ],
      "generated_sql": "SELECT COUNT(product_id) FROM products LIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 153.49,
      "sql_generation_time_ms": 462.4,
      "execution_time_ms": 20.63
    },
    {
      "id": "simple_002",
      "question": "List all customer names",
      "complexity": "simple",
      "ground_truth_tables": [
        "customers"
      ],
      "retrieved_tables": [
        "customers",
        "orders",
        "reviews"
      ],
      "generated_sql": "SELECT name FROM customers LIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 65.67,
      "sql_generation_time_ms": 119.06,
      "execution_time_ms": 28.54
    },
    {
      "id": "simple_003",
      "question": "Show products with price greater than 100",
      "complexity": "simple",
      "ground_truth_tables": [
        "products"
      ],
      "retrieved_tables": [
        "products",
        "order_items"
      ],
      "generated_sql": "SELECT name, price, stock_quantity, product_id FROM products WHERE price::INTEGER > 100 LIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 70.68,
      "sql_generation_time_ms": 187.09,
      "execution_time_ms": 25.84
    },
    {
      "id": "simple_004",
      "question": "What are the top 5 most expensive products?",
      "complexity": "simple",
      "ground_truth_tables": [
        "products"
      ],
      "retrieved_tables": [
        "products",
        "order_items"
      ],
      "generated_sql": "SELECT name, price \nFROM products \nORDER BY price::DECIMAL DESC \nLIMIT 5;",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 84.95,
      "sql_generation_time_ms": 470.17,
      "execution_time_ms": 26.79
    },
    {
      "id": "simple_005",
      "question": "Count how many orders have completed status",
      "complexity": "simple",
      "ground_truth_tables": [
        "orders"
      ],
      "retrieved_tables": [
        "orders",
        "payments",
        "order_items"
      ],
      "generated_sql": "SELECT COUNT(order_id) FROM orders WHERE status::TEXT = 'completed' LIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 82.91,
      "sql_generation_time_ms": 191.38,
      "execution_time_ms": 29.52
    },
    {
      "id": "simple_006",
      "question": "Show all product categories",
      "complexity": "simple",
      "ground_truth_tables": [
        "categories"
      ],
      "retrieved_tables": [
        "products",
        "categories"
      ],
      "generated_sql": "SELECT DISTINCT c.name \nFROM categories c \nJOIN products p ON c.category_id::INTEGER = p.category_id::INTEGER \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 67.31,
      "sql_generation_time_ms": 358.1,
      "execution_time_ms": 31.04
    },
    {
      "id": "simple_007",
      "question": "Find products with low stock (less than 10 units)",
      "complexity": "simple",
      "ground_truth_tables": [
        "products"
      ],
      "retrieved_tables": [
        "products",
        "order_items"
      ],
      "generated_sql": "SELECT product_id \nFROM products \nWHERE stock_quantity::INTEGER < 10 \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 71.37,
      "sql_generation_time_ms": 178.96,
      "execution_time_ms": 55.23
    },
    {
      "id": "simple_008",
      "question": "List customers from USA",
      "complexity": "simple",
      "ground_truth_tables": [
        "customers"
      ],
      "retrieved_tables": [
        "customers",
        "orders",
        "reviews"
      ],
      "generated_sql": "SELECT name, email, customer_id FROM customers WHERE country ILIKE 'USA' LIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 97.95,
      "sql_generation_time_ms": 279.1,
      "execution_time_ms": 37.81
    },
    {
      "id": "medium_001",
      "question": "What are the top 10 products by revenue?",
      "complexity": "medium",
      "ground_truth_tables": [
        "products",
        "order_items"
      ],
      "retrieved_tables": [
        "products",
        "order_items"
      ],
      "generated_sql": "SELECT p.product_id, SUM(oi.subtotal) AS revenue \nFROM products p \nJOIN order_items oi ON p.product_id = oi.product_id::INTEGER \nGROUP BY p.product_id \nORDER BY revenue DESC \nLIMIT 10;",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 66.89,
      "sql_generation_time_ms": 292.93,
      "execution_time_ms": 47.8
    },
    {
      "id": "medium_002",
      "question": "Show customers and their total order count",
      "complexity": "medium",
      "ground_truth_tables": [
        "customers",
        "orders"
      ],
      "retrieved_tables": [
        "orders",
        "order_items",
        "payments"
      ],
      "generated_sql": "SELECT customer_id, COUNT(*) AS total_order_count \nFROM orders \nGROUP BY customer_id \nORDER BY total_order_count DESC \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 69.18,
      "sql_generation_time_ms": 179.7,
      "execution_time_ms": 37.94
    },
    {
      "id": "medium_003",
      "question": "Calculate total revenue by product category",
      "complexity": "medium",
      "ground_truth_tables": [
        "categories",
        "products",
        "order_items"
      ],
      "retrieved_tables": [
        "products",
        "orders",
        "order_items"
      ],
      "generated_sql": "SELECT category_id::INTEGER, SUM(price * stock_quantity) AS total_revenue \nFROM products \nGROUP BY category_id::INTEGER \nORDER BY total_revenue DESC \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 81.8,
      "sql_generation_time_ms": 190.36,
      "execution_time_ms": 34.57
    },
    {
      "id": "medium_004",
      "question": "Find products that have never been ordered",
      "complexity": "medium",
      "ground_truth_tables": [
        "products",
        "order_items"
      ],
      "retrieved_tables": [
        "order_items",
        "products",
        "reviews",
        "orders"
      ],
      "generated_sql": "SELECT product_id FROM products WHERE product_id NOT IN (SELECT product_id FROM order_items) LIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 73.95,
      "sql_generation_time_ms": 153.5,
      "execution_time_ms": 26.42
    },
    {
      "id": "medium_005",
      "question": "Show average order value by customer",
      "complexity": "medium",
      "ground_truth_tables": [
        "customers",
        "orders"
      ],
      "retrieved_tables": [
        "orders",
        "order_items",
        "customers"
      ],
      "generated_sql": "SELECT customer_id, AVG(total_amount) AS average_order_value \nFROM orders \nGROUP BY customer_id \nORDER BY average_order_value DESC \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 70.1,
      "sql_generation_time_ms": 202.74,
      "execution_time_ms": 36.17
    },
    {
      "id": "medium_006",
      "question": "List products with their average review rating",
      "complexity": "medium",
      "ground_truth_tables": [
        "products",
        "reviews"
      ],
      "retrieved_tables": [
        "reviews"
      ],
      "generated_sql": "SELECT product_id, AVG(rating) AS average_rating \nFROM reviews \nGROUP BY product_id \nORDER BY average_rating DESC \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 68.63,
      "sql_generation_time_ms": 203.7,
      "execution_time_ms": 25.0
    },
    {
      "id": "medium_007",
      "question": "Count orders per payment method",
      "complexity": "medium",
      "ground_truth_tables": [
        "orders",
        "payments"
      ],
      "retrieved_tables": [
        "payments",
        "orders"
      ],
      "generated_sql": "SELECT payment_method, COUNT(DISTINCT order_id) AS order_count \nFROM payments \nGROUP BY payment_method \nORDER BY order_count DESC \nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 72.08,
      "sql_generation_time_ms": 214.25,
      "execution_time_ms": 30.05
    },
    {
      "id": "medium_008",
      "question": "Show total quantity sold for each product",
      "complexity": "medium",
      "ground_truth_tables": [
        "products",
        "order_items"
      ],
      "retrieved_tables": [
        "order_items",
        "products",
        "orders"
      ],
      "generated_sql": "SELECT SUM(oi.quantity) AS total_quantity_sold\nFROM order_items oi\nJOIN products p ON oi.quantity::INTEGER > 0\nGROUP BY p.price, p.stock_quantity\nORDER BY total_quantity_sold DESC\nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 72.72,
      "sql_generation_time_ms": 320.76,
      "execution_time_ms": 40.12
    },
    {
      "id": "hard_001",
      "question": "Find customers who have placed more orders than average",
      "complexity": "hard",
      "ground_truth_tables": [
        "customers",
        "orders"
      ],
      "retrieved_tables": [
        "orders",
        "order_items",
        "customers",
        "payments"
      ],
      "generated_sql": "SELECT c.name \nFROM customers c\nJOIN orders o ON c.customer_id = o.customer_id\nGROUP BY c.name\nHAVING COUNT(o.customer_id) > (SELECT AVG(order_count) \n                                FROM (SELECT customer_id, COUNT(customer_id) AS order_count \n                                      FROM orders \n                                      GROUP BY customer_id) AS subquery)\nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 67.96,
      "sql_generation_time_ms": 431.87,
      "execution_time_ms": 32.87
    },
    {
      "id": "hard_002",
      "question": "Show monthly revenue trend for the last 6 months",
      "complexity": "hard",
      "ground_truth_tables": [
        "orders",
        "order_items"
      ],
      "retrieved_tables": [
        "customers",
        "orders",
        "payments",
        "order_items"
      ],
      "generated_sql": "SELECT \n    DATE_TRUNC('month', payment_date) AS month,\n    SUM(amount) AS revenue\nFROM \n    payments\nWHERE \n    payment_date >= CURRENT_DATE - INTERVAL '6 month'\nGROUP BY \n    DATE_TRUNC('month', payment_date)\nORDER BY \n    month\nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 73.56,
      "sql_generation_time_ms": 262.81,
      "execution_time_ms": 38.86
    },
    {
      "id": "hard_003",
      "question": "Rank products by revenue within each category",
      "complexity": "hard",
      "ground_truth_tables": [
        "categories",
        "products",
        "order_items"
      ],
      "retrieved_tables": [
        "products",
        "order_items",
        "reviews"
      ],
      "generated_sql": "SELECT category_id, product_id, SUM(price * stock_quantity) AS revenue\nFROM products\nJOIN order_items ON products.id = order_items.product_id\nGROUP BY category_id, product_id\nORDER BY category_id, revenue DESC\nLIMIT 1000;",
      "execution_success": false,
      "error_type": "column_not_found",
      "error_message": "column products.id does not exist\nLINE 3: JOIN order_items ON products.id = order_items.product_id\n                            ^\n",
      "schema_linking_time_ms": 66.53,
      "sql_generation_time_ms": 235.68,
      "execution_time_ms": 34.59
    },
    {
      "id": "hard_004",
      "question": "Identify customers who haven't ordered in the last 90 days",
      "complexity": "hard",
      "ground_truth_tables": [
        "customers",
        "orders"
      ],
      "retrieved_tables": [
        "orders",
        "customers"
      ],
      "generated_sql": "SELECT c.customer_id, c.name \nFROM customers c \nLEFT JOIN orders o ON c.customer_id = o.customer_id \nWHERE o.customer_id IS NULL OR o.customer_id NOT IN (\n  SELECT customer_id \n  FROM orders \n  WHERE created_at > (CURRENT_DATE - INTERVAL '90 day')\n)\nLIMIT 1000",
      "execution_success": true,
      "error_type": null,
      "error_message": null,
      "schema_linking_time_ms": 77.81,
      "sql_generation_time_ms": 292.82,
      "execution_time_ms": 36.6
    }
  ]
}