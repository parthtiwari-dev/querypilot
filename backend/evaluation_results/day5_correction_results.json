{
  "timestamp": "2026-02-17T20:47:22.727888",
  "dataset": "backend/app/evaluation/datasets/core_eval.json",
  "total_tests": 20,
  "summary": {
    "first_attempt_success": 14,
    "first_attempt_rate": 0.7,
    "corrected_success": 6,
    "correction_effectiveness": 1.0,
    "final_failures": 0,
    "overall_success_rate": 1.0,
    "avg_attempts": 1.6,
    "total_attempts": 32
  },
  "criteria": {
    "first_attempt_above_30": true,
    "correction_above_60": true,
    "overall_above_85": true,
    "all_passed": true
  },
  "category_breakdown": {
    "core_eval": {
      "total": 20,
      "first_success": 14,
      "corrected": 6,
      "failed": 0
    }
  },
  "detailed_results": [
    {
      "test_id": "simple_001",
      "question": "How many products are in the database?",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT COUNT(product_id) AS total_products FROM products LIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "total_products": 3
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 40.93,
        "row_count": 1
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_002",
      "question": "List all customer names",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT name FROM customers LIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "name": "Alice Johnson"
          },
          {
            "name": "Bob Smith"
          },
          {
            "name": "Charlie Brown"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 6.88,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_003",
      "question": "Show products with price greater than 100",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT product_id, name, price, stock_quantity FROM products WHERE price > 100 LIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "product_id": 1,
            "name": "Laptop",
            "price": "999.99",
            "stock_quantity": 50
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 8.21,
        "row_count": 1
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_004",
      "question": "What are the top 5 most expensive products?",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT name, price FROM products ORDER BY price DESC LIMIT 5;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "name": "Laptop",
            "price": "999.99"
          },
          {
            "name": "Python Programming Book",
            "price": "39.99"
          },
          {
            "name": "T-Shirt",
            "price": "29.99"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 3.96,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_005",
      "question": "Count how many orders have completed status",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT COUNT(order_id) AS completed_orders_count \nFROM orders \nWHERE status ILIKE 'completed' \nLIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "completed_orders_count": 2
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 6.53,
        "row_count": 1
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_006",
      "question": "Show all product categories",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT category_id, name, description FROM categories LIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "category_id": 1,
            "name": "Electronics",
            "description": "Electronic devices and accessories"
          },
          {
            "category_id": 2,
            "name": "Clothing",
            "description": "Apparel and fashion items"
          },
          {
            "category_id": 3,
            "name": "Books",
            "description": "Physical and digital books"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 6.84,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_007",
      "question": "Find products with low stock (less than 10 units)",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT product_id, stock_quantity FROM products WHERE stock_quantity < 10 LIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 3.48,
        "row_count": 0
      },
      "validation_issues": []
    },
    {
      "test_id": "simple_008",
      "question": "List customers from USA",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT customer_id, name, email FROM customers WHERE country ILIKE 'USA' LIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "customer_id": 1,
            "name": "Alice Johnson",
            "email": "alice@example.com"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 4.02,
        "row_count": 1
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_001",
      "question": "What are the top 10 products by revenue?",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT oi.product_id, SUM(oi.subtotal) AS total_revenue\nFROM order_items oi\nGROUP BY oi.product_id\nORDER BY total_revenue DESC\nLIMIT 10;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "product_id": 1,
            "total_revenue": "999.99"
          },
          {
            "product_id": 3,
            "total_revenue": "39.99"
          },
          {
            "product_id": 2,
            "total_revenue": "29.99"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 9.09,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_002",
      "question": "Show customers and their total order count",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT customer_id, COUNT(*) AS total_order_count \nFROM orders \nGROUP BY customer_id \nORDER BY total_order_count DESC \nLIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "customer_id": 3,
            "total_order_count": 1
          },
          {
            "customer_id": 2,
            "total_order_count": 1
          },
          {
            "customer_id": 1,
            "total_order_count": 1
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 4.8,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_003",
      "question": "Calculate total revenue by product category",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 3,
      "was_corrected": true,
      "used_fallback": true,
      "final_sql": "SELECT * FROM products LIMIT 100",
      "execution_result": {
        "success": true,
        "data": [
          {
            "product_id": 1,
            "name": "Laptop",
            "category_id": 1,
            "price": "999.99",
            "stock_quantity": 50,
            "created_at": "2026-02-04 21:11:16.503663"
          },
          {
            "product_id": 2,
            "name": "T-Shirt",
            "category_id": 2,
            "price": "29.99",
            "stock_quantity": 200,
            "created_at": "2026-02-04 21:11:16.503663"
          },
          {
            "product_id": 3,
            "name": "Python Programming Book",
            "category_id": 3,
            "price": "39.99",
            "stock_quantity": 100,
            "created_at": "2026-02-04 21:11:16.503663"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 4.17,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_004",
      "question": "Find products that have never been ordered",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT p.product_id \nFROM products p \nLEFT JOIN order_items oi ON p.product_id = oi.product_id \nWHERE oi.product_id IS NULL \nLIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 3.74,
        "row_count": 0
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_005",
      "question": "Show average order value by customer",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT customer_id, AVG(total_amount) AS average_order_value \nFROM orders \nGROUP BY customer_id \nLIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "customer_id": 3,
            "average_order_value": "39.9900000000000000"
          },
          {
            "customer_id": 2,
            "average_order_value": "29.9900000000000000"
          },
          {
            "customer_id": 1,
            "average_order_value": "999.9900000000000000"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 5.58,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_006",
      "question": "List products with their average review rating",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT product_id, AVG(rating) AS average_rating\nFROM reviews\nGROUP BY product_id\nORDER BY product_id\nLIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 7.34,
        "row_count": 0
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_007",
      "question": "Count orders per payment method",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 3,
      "was_corrected": true,
      "used_fallback": true,
      "final_sql": "SELECT * FROM payments LIMIT 100",
      "execution_result": {
        "success": true,
        "data": [
          {
            "payment_id": 1,
            "order_id": 1,
            "payment_method": "credit_card",
            "amount": "999.99",
            "payment_date": "2026-02-04 21:11:16.517384",
            "status": "completed"
          },
          {
            "payment_id": 2,
            "order_id": 2,
            "payment_method": "paypal",
            "amount": "29.99",
            "payment_date": "2026-02-04 21:11:16.517384",
            "status": "pending"
          },
          {
            "payment_id": 3,
            "order_id": 3,
            "payment_method": "credit_card",
            "amount": "39.99",
            "payment_date": "2026-02-04 21:11:16.517384",
            "status": "completed"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 6.62,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "medium_008",
      "question": "Show total quantity sold for each product",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 3,
      "was_corrected": true,
      "used_fallback": true,
      "final_sql": "SELECT * FROM order_items LIMIT 100",
      "execution_result": {
        "success": true,
        "data": [
          {
            "order_item_id": 1,
            "order_id": 1,
            "product_id": 1,
            "quantity": 1,
            "unit_price": "999.99",
            "subtotal": "999.99"
          },
          {
            "order_item_id": 2,
            "order_id": 2,
            "product_id": 2,
            "quantity": 1,
            "unit_price": "29.99",
            "subtotal": "29.99"
          },
          {
            "order_item_id": 3,
            "order_id": 3,
            "product_id": 3,
            "quantity": 1,
            "unit_price": "39.99",
            "subtotal": "39.99"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 5.3,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "hard_001",
      "question": "Find customers who have placed more orders than average",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 3,
      "was_corrected": true,
      "used_fallback": true,
      "final_sql": "SELECT * FROM orders LIMIT 100",
      "execution_result": {
        "success": true,
        "data": [
          {
            "order_id": 1,
            "customer_id": 1,
            "order_date": "2026-02-04 21:11:16.507976",
            "status": "completed",
            "total_amount": "999.99"
          },
          {
            "order_id": 2,
            "customer_id": 2,
            "order_date": "2026-02-04 21:11:16.507976",
            "status": "pending",
            "total_amount": "29.99"
          },
          {
            "order_id": 3,
            "customer_id": 3,
            "order_date": "2026-02-04 21:11:16.507976",
            "status": "completed",
            "total_amount": "39.99"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 6.98,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "hard_002",
      "question": "Show monthly revenue trend for the last 6 months",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 3,
      "was_corrected": true,
      "used_fallback": true,
      "final_sql": "SELECT * FROM customers LIMIT 100",
      "execution_result": {
        "success": true,
        "data": [
          {
            "customer_id": 1,
            "name": "Alice Johnson",
            "email": "alice@example.com",
            "created_at": "2026-02-04 21:11:16.495462",
            "country": "USA",
            "lifetime_value": "1250.00"
          },
          {
            "customer_id": 2,
            "name": "Bob Smith",
            "email": "bob@example.com",
            "created_at": "2026-02-04 21:11:16.495462",
            "country": "UK",
            "lifetime_value": "890.50"
          },
          {
            "customer_id": 3,
            "name": "Charlie Brown",
            "email": "charlie@example.com",
            "created_at": "2026-02-04 21:11:16.495462",
            "country": "Canada",
            "lifetime_value": "2100.00"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 4.89,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "hard_003",
      "question": "Rank products by revenue within each category",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 1,
      "was_corrected": false,
      "used_fallback": true,
      "final_sql": "SELECT category_id, SUM(price * stock_quantity) AS revenue\nFROM products\nGROUP BY category_id\nORDER BY revenue DESC\nLIMIT 1000;",
      "execution_result": {
        "success": true,
        "data": [
          {
            "category_id": 1,
            "revenue": "49999.50"
          },
          {
            "category_id": 2,
            "revenue": "5998.00"
          },
          {
            "category_id": 3,
            "revenue": "3999.00"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 6.55,
        "row_count": 3
      },
      "validation_issues": []
    },
    {
      "test_id": "hard_004",
      "question": "Identify customers who haven't ordered in the last 90 days",
      "category": "core_eval",
      "expected_error": "N/A",
      "should_succeed": true,
      "actual_success": true,
      "attempts": 3,
      "was_corrected": true,
      "used_fallback": true,
      "final_sql": "SELECT * FROM orders LIMIT 100",
      "execution_result": {
        "success": true,
        "data": [
          {
            "order_id": 1,
            "customer_id": 1,
            "order_date": "2026-02-04 21:11:16.507976",
            "status": "completed",
            "total_amount": "999.99"
          },
          {
            "order_id": 2,
            "customer_id": 2,
            "order_date": "2026-02-04 21:11:16.507976",
            "status": "pending",
            "total_amount": "29.99"
          },
          {
            "order_id": 3,
            "customer_id": 3,
            "order_date": "2026-02-04 21:11:16.507976",
            "status": "completed",
            "total_amount": "39.99"
          }
        ],
        "error_type": null,
        "error_message": null,
        "error_feedback": null,
        "execution_time_ms": 8.86,
        "row_count": 3
      },
      "validation_issues": []
    }
  ]
}